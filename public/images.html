<!DOCTYPE html>

<html lang="ar" dir="rtl">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>نتائج الصور - joojle</title>

  <link rel="icon" href="favicon.png" type="image/png">

  <style>

    :root {

      --google-blue: #1a0dab;

      --google-grey: #70757a;

      --google-border: #dfe1e5;

      --active-blue: #1a73e8;

      --site-name-color: #202124;

    }



    body {

      margin: 0;

      font-family: Arial, sans-serif;

      background: #fff;

      direction: rtl;

    }



    /* الهيدر العلوي */

    header {

      padding-top: 15px;

      border-bottom: 1px solid #ebebeb;

      background: white;

      position: sticky;

      top: 0;

      z-index: 100;

    }



    .top-bar {

      display: flex;

      align-items: center;

      padding: 0 3% 15px;

      gap: 20px;

    }



    .logo { 

      font-size: 27px; font-weight: bold; text-decoration: none;

      font-family: 'Product Sans', Arial, sans-serif;

      flex-shrink: 0;

    }

    .blue{color:#4285F4} .red{color:#EA4335} .yellow{color:#FBBC05} .green{color:#34A853}
    .search-box {

      flex: 1;

      display: flex;

      justify-content: center;

    }



    .search-wrapper {

      display: flex;

      align-items: center;

      gap: 8px;

      background: #fff;

      border: 1px solid var(--google-border);

      border-radius: 999px;

      padding: 5px 15px;

      box-shadow: 0 1px 6px rgba(32,33,36,.15);

      width: 100%;

      max-width: 720px;

      box-sizing: border-box;

    }



    .search-wrapper input {

      flex: 1; border: none; outline: none; font-size: 16px; padding: 8px; direction: rtl; background: transparent; min-width: 0;

    }
	.icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 4px;
  transition: transform 0.1s;
}


.icon-btn svg {
  width: 24px;
  height: 24px;
}
@media (max-width: 480px) {
  .search-wrapper {
    padding: 6px 10px;
    gap: 4px;
  }

  .search-wrapper input {
    font-size: 15px;
    padding: 6px;
  }

  .icon-btn {
    padding: 4px;
  }

  .icon-btn svg {
    width: 18px;
    height: 18px;
  }
}
    /* شريط التصنيفات */

    .tabs-container { display: flex; padding: 0 12%; gap: 20px; }

    .tab { padding: 10px 5px 12px; font-size: 14px; color: var(--google-grey); cursor: pointer; display: flex; align-items: center; gap: 5px; border-bottom: 3px solid transparent; transition: 0.2s; }

    .tab.active { color: var(--active-blue); border-bottom: 3px solid var(--active-blue); }

    .tab svg { width: 16px; height: 16px; fill: currentColor; }



    /* منطقة النتائج */

    #results {

      max-width: 650px;

      margin-right: 12%;

      margin-top: 20px;

      padding: 0 15px;

    }



    .result { margin-bottom: 32px; }



    .result-header {

      display: flex;

      align-items: center;

      margin-bottom: 4px;

      gap: 12px;

    }



    .site-icon {

      width: 26px;

      height: 26px;

      background: #f1f3f4;

      border-radius: 50%;

      display: flex;

      align-items: center;

      justify-content: center;

      overflow: hidden;

      flex-shrink: 0;

    }



    .site-icon img { width: 16px; height: 16px; }

    .site-info { display: flex; flex-direction: column; }

    .site-name { font-size: 14px; color: var(--site-name-color); line-height: 1.3; }

    .site-url { font-size: 12px; color: var(--google-grey); direction: ltr; text-align: right; }



    .result a.title { font-size: 20px; color: var(--google-blue); text-decoration: none; display: inline-block; margin-bottom: 4px; }

    .result a.title:hover { text-decoration: underline; }

    .result .snippet { font-size: 14px; color: #4d5156; line-height: 1.58; word-wrap: break-word; }



    /* تنسيق الفيديوهات */

    .video-item {

      display: flex;

      gap: 16px;

      margin-top: 8px;

      align-items: flex-start;

    }

    .video-thumb-container {

      position: relative;

      width: 160px;

      height: 90px;

      flex-shrink: 0;

      border-radius: 12px;

      overflow: hidden;

      background: #000;

      box-shadow: 0 1px 4px rgba(0,0,0,0.1);

    }

    .video-thumb-container img { width: 100%; height: 100%; object-fit: cover; }

    .play-overlay {

      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);

      background: rgba(0,0,0,0.5); border-radius: 50%; width: 34px; height: 34px;

      display: flex; align-items: center; justify-content: center;

      border: 1.5px solid #fff;

    }

    .video-duration {

      position: absolute; bottom: 5px; left: 5px;

      background: rgba(0,0,0,0.8); color: white;

      font-size: 11px; padding: 1px 4px; border-radius: 4px;

      direction: ltr;

    }

    .video-info-side { flex: 1; }



    /* --- تنسيق الترقيم الجديد --- */

    .pagination {

      display: flex;

      flex-direction: column;

      align-items: center;

      margin: 40px 0 60px;

      font-family: Arial, sans-serif;

    }

    .pagination-logo {

      font-size: 32px;

      font-weight: bold;

      margin-bottom: 10px;

      display: flex;

      direction: ltr;

    }

    .pagination-numbers-wrap {

      display: flex;

      align-items: center;

      gap: 15px;

      list-style: none;

      padding: 0;

    }

    .pagination-numbers-wrap li {

      cursor: pointer;

      font-size: 14px;

      color: var(--active-blue);

    }

    .pagination-numbers-wrap li.active {

      color: #000;

      font-weight: bold;

      cursor: default;

    }

    .pagination-numbers-wrap li:hover:not(.active) {

      text-decoration: underline;

    }

    .nav-btn {

      display: flex;

      align-items: center;

      gap: 5px;

      font-size: 14px;

      color: var(--active-blue);

      cursor: pointer;

    }

    .prev-btn svg { transform: rotate(180deg); }

    /* --- نهاية تنسيق الترقيم --- */



    .image-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }

    .img-card img { width: 100%; border-radius: 8px; object-fit: cover; height: 120px; }



    @media (max-width: 800px) {

      .top-bar { flex-direction: column; padding: 10px; gap: 10px; }

      .search-box { width: 100%; }

      .tabs-container { padding: 0 15px; justify-content: flex-start; overflow-x: auto; }

      #results { margin-right: 0; margin: auto; }

      .video-item { flex-direction: column; }

      .video-thumb-container { width: 100%; height: 180px; }

    }

  </style>

</head>

<body>



  <header>

    <div class="top-bar">

      <a href="index.html" class="logo">

        <span class="blue">j</span><span class="red">o</span><span class="yellow">o</span><span class="blue">j</span><span class="green">l</span><span class="red">e</span>

      </a>



      <div class="search-box">

        <div class="search-wrapper">

          <button class="icon-btn" onclick="goToResults()" title="بحث">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" color="#9aa0a6" height="18" width="18" xmlns="http://www.w3.org/2000/svg" style="color: rgb(154, 160, 166);"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg>
          </button>

          <input id="searchInput" type="text" placeholder="ابحث في الويب..." onkeydown="if(event.key==='Enter'){currentPage=1; performSearch();}"/>

          <button class="icon-btn" onclick="voiceSearch()" title="بحث صوتي">

          <svg class="goxjub" focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-iml="1669911182876"><path fill="#4285f4" d="m12 15c1.66 0 3-1.31 3-2.97v-7.02c0-1.66-1.34-3.01-3-3.01s-3 1.34-3 3.01v7.02c0 1.66 1.34 2.97 3 2.97z"></path><path fill="#34a853" d="m11 18.08h2v3.92h-2z"></path><path fill="#fbbc05" d="m7.05 16.87c-1.27-1.33-2.05-2.83-2.05-4.87h2c0 1.45 0.56 2.42 1.47 3.38v0.32l-1.15 1.18z"></path><path fill="#ea4335" d="m12 16.93a4.97 5.25 0 0 1 -3.54 -1.55l-1.41 1.49c1.26 1.34 3.02 2.13 4.95 2.13 3.87 0 6.99-2.92 6.99-7h-1.99c0 2.92-2.24 4.93-5 4.93z"></path></svg>

          </button>

          <button class="icon-btn" onclick="imageSearch()" title="بحث بالصورة">

            <svg version="1.1" id="Standard_product_icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="192px" height="192px" viewBox="0 0 192 192" enable-background="new 0 0 192 192" xml:space="preserve">
<rect id="bounding_box_1_" fill="none" width="192" height="192"/>
<g id="art_layer">
	<circle id="Dot" fill="#4285F4" cx="96" cy="104.15" r="28"/>
	<path id="Red" fill="#EA4335" d="M160,72v40.15V136c0,1.69-0.34,3.29-0.82,4.82v0v0c-1.57,4.92-5.43,8.78-10.35,10.35h0v0
		c-1.53,0.49-3.13,0.82-4.82,0.82H66l16,16h50h12c4.42,0,8.63-0.9,12.46-2.51c3.83-1.62,7.28-3.96,10.17-6.86
		c1.45-1.45,2.76-3.03,3.91-4.74c2.3-3.4,3.96-7.28,4.81-11.44c0.43-2.08,0.65-4.24,0.65-6.45v-12V96.15V84l-6-19l-10.82,2.18
		C159.66,68.71,160,70.31,160,72z"/>
	<path id="Blue" fill="#4285F4" d="M32,72c0-1.69,0.34-3.29,0.82-4.82c1.57-4.92,5.43-8.78,10.35-10.35C44.71,56.34,46.31,56,48,56
		h96c1.69,0,3.29,0.34,4.82,0.82c0,0,0,0,0,0L149,45l-17-5l-16-16h-13.44H96h-6.56H76L60,40H48c-17.67,0-32,14.33-32,32v12v20l16,16
		V72z"/>
	<path id="Green" fill="#34A853" d="M144,40h-12l16.83,16.83c1.23,0.39,2.39,0.93,3.47,1.59c2.16,1.32,3.97,3.13,5.29,5.29
		c0.66,1.08,1.2,2.24,1.59,3.47v0L176,84V72C176,54.33,161.67,40,144,40z"/>
	<path id="Yellow" fill="#FBBC04" d="M48,168h39.89l-16-16H48c-8.82,0-16-7.18-16-16v-23.89l-16-16V136C16,153.67,30.33,168,48,168z
		"/>
</g>
</svg>

          </button>

          <input type="file" id="imageInput" accept="image/*" hidden />

        </div>

      </div>

    </div>



    <div class="tabs-container">

      <div class="tab active" id="tab-all" onclick="changeTab('all')">

        <svg viewBox="0 0 24 24"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></svg>الكل

      </div>

      <div class="tab" id="tab-image" onclick="changeTab('image')">

        <svg viewBox="0 0 24 24"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>صور

      </div>

      <div class="tab" id="tab-video" onclick="changeTab('video')">

        <svg viewBox="0 0 24 24"><path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>فيديوهات

      </div>

      <div class="tab" id="tab-news" onclick="changeTab('news')">

        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>أخبار

      </div>

    </div>

  </header>



  <div id="results"></div>



  <div id="pagination-container" class="pagination" style="display: none;">

    <div class="pagination-logo" id="pagination-logo"></div>

    <ul class="pagination-numbers-wrap">

      <div id="prev-btn-placeholder"></div>

      <div id="page-numbers-list" style="display: flex; gap: 12px;"></div>

      <div id="next-btn-placeholder"></div>

    </ul>

  </div>



  <script>

    const API_BASE = "https://joojle-one.vercel.app/api/search?q=";

    let currentType = 'all';

    let currentPage = 1;

    const resultsPerPage = 10;


function changeTab(type) {
    // 1. تحديث نوع البحث الحالي
    currentType = type;
    
    // 2. إعادة تعيين رقم الصفحة للبداية عند تغيير القسم
    currentPage = 1;

    // 3. تحديث الشكل البصري للتبويبات
    document.querySelectorAll('.tab').forEach(t => {
        t.classList.remove('active');
    });

    // 4. تفعيل التبويب المختار (مع فحص الأمان للتأكد من وجود العنصر)
    const targetTab = document.getElementById(`tab-${type}`);
    if (targetTab) {
        targetTab.classList.add('active');
    } else {
        // إذا لم يجد التبويب المحدد، يفعل تبويب "الكل" كافتراضي
        const allTab = document.getElementById('tab-all');
        if (allTab) allTab.classList.add('active');
    }

    // 5. استدعاء دالة جلب البيانات
    performSearch();
}

    function getDomainInfo(url) {

      try {

        const urlObj = new URL(url);

        let hostname = urlObj.hostname.replace('www.', '');

        let siteName = hostname.split('.')[0];

        siteName = siteName.charAt(0).toUpperCase() + siteName.slice(1);

        return {

          domain: hostname,

          name: siteName,

          favicon: `https://www.google.com/s2/favicons?sz=64&domain=${hostname}`

        };

      } catch(e) {

        return { domain: url, name: "موقع", favicon: "https://via.placeholder.com/16" };

      }

    }



    async function performSearch() {

      const q = document.getElementById("searchInput").value.trim();

      if (!q) return;



      const container = document.getElementById("results");

      const paginationBox = document.getElementById("pagination-container");

      

      container.innerHTML = `<p style="color:#70757a; padding: 20px;">جاري تحميل صفحة ${currentPage}...</p>`;

      paginationBox.style.display = "none";

      window.scrollTo(0, 0);



      // حساب معامل start لمنع تكرار النتائج

      const start = (currentPage - 1) * resultsPerPage;



      try {

        const res = await fetch(`${API_BASE}${encodeURIComponent(q)}&type=${currentType}&start=${start}`);

        const data = await res.json();

        container.innerHTML = '';

        const items = Array.isArray(data) ? data : (data.items || []);



        if (items.length === 0) {

          container.innerHTML = '<p style="padding: 20px;">لم يتم العثور على نتائج إضافية.</p>';

          return;

        }



        if (currentType === 'image') {

          const grid = document.createElement('div');

          grid.className = 'image-grid';

          items.forEach(item => {

            grid.innerHTML += `

              <div class="img-card">

                <a href="${item.link}" target="_blank">

                  <img src="${item.image || item.link}" onerror="this.src='https://via.placeholder.com/150'">

                  <div style="font-size:11px; margin-top:5px; color:#70757a">${item.title.substring(0,25)}</div>

                </a>

              </div>`;

          });

          container.appendChild(grid);

        } else {

          items.forEach(item => {

            const info = getDomainInfo(item.link);

            const div = document.createElement('div');

            div.className = 'result';

            

            let contentHTML = `

              <div class="result-header">

                <div class="site-icon"><img src="${info.favicon}" alt=""></div>

                <div class="site-info">

                  <span class="site-name">${info.name}</span>

                  <span class="site-url">${info.domain}</span>

                </div>

              </div>

              <a class="title" href="${item.link}" target="_blank">${item.title}</a>

            `;



            if (currentType === 'video') {

              contentHTML += `

                <div class="video-item">

                  <div class="video-thumb-container">

                    <img src="${item.image || 'https://via.placeholder.com/160x90?text=Video'}" onerror="this.src='https://via.placeholder.com/160x90'">

                    <div class="play-overlay">

                      <svg width="18" height="18" fill="white" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>

                    </div>

                    ${item.duration ? `<div class="video-duration">${item.duration}</div>` : ''}

                  </div>

                  <div class="video-info-side">

                    <div class="snippet">${item.snippet || 'مشاهدة الفيديو على ' + info.name}</div>

                  </div>

                </div>

              `;

            } else {

              contentHTML += `<div class="snippet">${item.snippet || ''}</div>`;

            }



            div.innerHTML = contentHTML;

            container.appendChild(div);

          });

        }



        // تحديث واجهة الترقيم

        renderPagination();

        paginationBox.style.display = "flex";



      } catch (err) {

        container.innerHTML = '<p style="padding: 20px;">حدث خطأ في الاتصال، يرجى المحاولة لاحقاً.</p>';

      }

    }



function renderPagination() {

      const logoDiv = document.getElementById("pagination-logo");

      const list = document.getElementById("page-numbers-list");

      const prevWrap = document.getElementById("prev-btn-placeholder");

      const nextWrap = document.getElementById("next-btn-placeholder");



      // إنشاء شعار joooooooooojle الملون

      // j (أزرق)

      let logoHTML = '<span class="blue">j</span>'; 

      

      // توليد 10 حروف o

      for(let i=0; i<10; i++) {

        if (i === 0) {

          // أول حرف o (أحمر)

          logoHTML += '<span class="red">o</span>';

        } else {

          // بقية الحروف o (أصفر)

          logoHTML += '<span class="yellow">o</span>';

        }

      }

      

      // إضافة j (أزرق) - l (أخضر) - e (أحمر)

      logoHTML += '<span class="blue">j</span><span class="green">l</span><span class="red">e</span>';

      

      logoDiv.innerHTML = logoHTML;



      // زر السابقة (يظهر فقط إذا لم تكن في الصفحة الأولى)

      prevWrap.innerHTML = currentPage > 1 ? `

        <li class="nav-btn prev-btn" onclick="goToPage(${currentPage - 1})">

          <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>

          السابقة

        </li>` : '';



      // توليد أرقام الصفحات من 1 إلى 10

      list.innerHTML = '';

      for(let i=1; i<=10; i++) {

        const li = document.createElement('li');

        li.innerText = i;

        if(i === currentPage) li.className = 'active';

        li.onclick = () => goToPage(i);

        list.appendChild(li);

      }



      // زر التالية (يظهر حتى الصفحة التاسعة)

      nextWrap.innerHTML = currentPage < 10 ? `

        <li class="nav-btn next-btn" onclick="goToPage(${currentPage + 1})">

          التالية

          <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>

        </li>` : '';

    }

    function goToPage(p) {

      currentPage = p;

      performSearch();

    }



    function imageSearch() { document.getElementById("imageInput").click(); }

    document.getElementById("imageInput").onchange = function() {

      if(this.files[0]) alert("جاري البحث باستخدام الصورة: " + this.files[0].name);

    };



    function voiceSearch() {

      if (!('webkitSpeechRecognition' in window)) return alert("متصفحك لا يدعم البحث الصوتي.");

      const rec = new webkitSpeechRecognition();

      rec.lang = "ar-SA";

      rec.onresult = (e) => {

        document.getElementById("searchInput").value = e.results[0][0].transcript;

        currentPage = 1;

        performSearch();

      };

      rec.start();

    }
window.onload = () => {
    const params = new URLSearchParams(window.location.search);
    const q = params.get('q');
    const typeFromUrl = params.get('type') || 'all'; // استقبال النوع من الرابط

    if (q) {
        document.getElementById('searchInput').value = q;
        // استدعاء الدالة التي عدلناها بالأعلى
        changeTab(typeFromUrl); 
    }
};
  </script>

</body>

</html>
